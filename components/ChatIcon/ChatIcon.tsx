import { useEffect, useState } from 'react'
import SupportPerson from './_components/SupportPerson';
import "./chatIcon.css"

const ChatIcon = () => {
    const [scrolled, setScrolled] = useState(false);
    const [showChat, setShowChat] = useState("");


    useEffect(() => {
        const handleScroll = () => {
            const scrollPosition = window.scrollY;
            setScrolled(scrollPosition >= 150);

            if (scrollPosition <= 150) {
                setShowChat("");
            }
        };

        window.addEventListener('scroll', handleScroll);
        return () => window.removeEventListener('scroll', handleScroll);
    }, []);

    return (
        <div className={`chat-icon-div ${scrolled ? "scrolled" : ""}`}>
            {showChat ? <div className='chat-icon-box' onClick={() => setShowChat("")}>
                <div className='chat-close-icon'>
                    <div>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 5L5 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M19 19L5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>
            </div>
                :
                <div className='chat-icon-box' onClick={() => setShowChat("show")}>
                    <div className='chat-icon-text' >
                        <p>Let's Chat</p>
                    </div>
                    <div className='chat-icon'>
                        <svg width="54" height="61" viewBox="0 0 54 61" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M27.4704 0C12.8185 0 0.931641 12.3975 0.931641 27.6934C0.931641 35.4976 4.03328 42.5488 9.01286 47.5823L4.91704 58.6871C4.51633 59.7819 5.66952 60.7779 6.62389 60.165L17.3362 53.2832C20.4532 54.6302 23.876 55.3739 27.4612 55.3739C42.1131 55.3739 54 42.9764 54 27.6805C54 12.3879 42.1223 0 27.4704 0Z" fill="#F7931E" />
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M34.8924 37.3258C35.7546 37.2428 36.5883 37.0352 37.373 36.7207C38.2054 36.3914 38.9852 35.9388 39.7041 35.3658C39.863 35.2416 40.0538 35.074 40.2474 34.8918C40.3204 34.8238 40.3924 34.7545 40.4632 34.6841C40.7705 34.3813 41.0572 34.0691 41.2036 33.8672C41.2851 33.7586 41.4427 33.5469 41.5513 33.3949C41.7189 33.1699 41.9015 32.8668 42.0781 32.5262C42.4413 31.854 42.7223 31.1312 42.9062 30.3707C43.0403 29.8147 43.1185 29.2386 43.142 28.6568C43.1919 27.5526 43.0416 26.4352 42.6909 25.3774C42.6293 25.1895 42.5616 25.0041 42.4879 24.8218C42.2977 24.3603 42.2216 24.1974 41.9011 23.6219C41.7435 23.3396 41.3306 22.7315 41.2056 22.6066C41.1676 22.5686 41.0915 22.4763 41.0426 22.4003C40.949 22.2612 40.6907 21.9905 40.3961 21.7088C40.1578 21.4766 39.9025 21.2427 39.7149 21.0918L39.3292 20.7714L39.2853 20.7714C38.5134 20.2284 37.7377 19.8413 36.8266 19.5444C35.9518 19.2566 35.2835 19.148 34.0774 19.0883C33.4798 19.0612 32.8604 19.0123 32.7083 18.9852L32.6737 18.9784L32.3531 18.8983C31.913 18.7951 31.1904 18.5291 30.897 18.3662C30.8592 18.3463 30.8106 18.3199 30.7582 18.2915C30.6768 18.2474 30.5865 18.1984 30.5141 18.1615C30.3565 18.0679 30.2032 17.9677 30.0545 17.8612C29.8808 17.7328 29.6924 17.5819 29.5148 17.4288C28.9094 16.8882 28.3956 16.2255 27.9869 15.4506C27.7261 14.9511 27.5957 14.8371 27.3132 14.8371L27.3131 14.8371L27.3111 14.8371C27.0286 14.8371 26.8982 14.9511 26.6374 15.4506C26.2287 16.2256 25.7148 16.8883 25.1094 17.429C24.9318 17.5819 24.7437 17.7327 24.57 17.861C24.4212 17.9676 24.2678 18.0678 24.1101 18.1615C24.0377 18.1984 23.9475 18.2474 23.8662 18.2915C23.8138 18.3199 23.7651 18.3463 23.7273 18.3662C23.4339 18.5291 22.7113 18.7951 22.2712 18.8983L21.9507 18.9784L21.9161 18.9852C21.7639 19.0123 21.1446 19.0612 20.5469 19.0883C19.3408 19.148 18.6725 19.2566 17.7978 19.5444C16.8867 19.8413 16.1109 20.2284 15.339 20.7714L15.2951 20.7714L14.9094 21.0918C14.7219 21.2427 14.4667 21.4765 14.2285 21.7086C13.9338 21.9904 13.6753 22.2612 13.5817 22.4003C13.5328 22.4763 13.4567 22.5686 13.4187 22.6066C13.2937 22.7315 12.8808 23.3396 12.7232 23.6219C12.4027 24.1974 12.3266 24.3603 12.1365 24.8218C12.0627 25.0041 11.995 25.1896 11.9334 25.3776C11.5828 26.4353 11.4324 27.5527 11.4823 28.6569C11.5058 29.2386 11.5841 29.8147 11.7181 30.3707C11.902 31.1311 12.183 31.8539 12.5462 32.5261C12.7227 32.8667 12.9054 33.1699 13.073 33.3949C13.1816 33.5469 13.3392 33.7586 13.4207 33.8672C13.5671 34.0692 13.8541 34.3816 14.1616 34.6845C14.2321 34.7546 14.3037 34.8236 14.3764 34.8914C14.5702 35.0737 14.7612 35.2416 14.9202 35.3658C15.6393 35.939 16.4194 36.3917 17.252 36.721C18.0365 37.0354 18.87 37.2428 19.732 37.3258C19.7583 37.3282 19.8025 37.3305 19.863 37.3328C20.3228 37.3641 23.8116 37.3785 27.3151 37.3774C30.8163 37.3785 34.3012 37.3641 34.7612 37.3328C34.8218 37.3305 34.866 37.3282 34.8924 37.3258ZM19.7883 35.5341C19.5136 35.5015 19.2447 35.4556 18.9818 35.3964C18.2112 35.213 17.4205 34.889 16.7365 34.4769C16.2709 34.1848 15.8364 33.8363 15.4364 33.4329C14.3891 32.3863 13.7254 31.1642 13.4155 29.7198C13.3482 29.3815 13.3049 29.0346 13.2849 28.6776C13.2628 28.0953 13.2912 27.396 13.3664 26.9827C13.4752 26.3861 13.6795 25.753 13.9449 25.1641C13.9815 25.0853 14.0198 25.0057 14.0598 24.925C14.2803 24.4768 14.5388 24.0609 14.8332 23.6791C15.1426 23.297 15.6603 22.7771 16.0315 22.4657C16.2259 22.312 16.4291 22.168 16.6409 22.034C17.2971 21.6307 18.1242 21.2706 18.8267 21.0972C19.2796 20.9861 19.5549 20.9304 20.7417 20.9047L27.0395 20.8909L27.3117 20.8903L27.5848 20.8909L33.8828 20.9047C35.0694 20.9304 35.3447 20.9861 35.7977 21.0972C36.5001 21.2705 37.3271 21.6306 37.9832 22.0339C38.1951 22.1679 38.3984 22.312 38.5929 22.4658C38.9641 22.7771 39.4817 23.2969 39.7911 23.679C40.0855 24.0608 40.344 24.4768 40.5645 24.925C40.6046 25.0057 40.6428 25.0854 40.6795 25.1642C40.9448 25.753 41.1491 26.3861 41.2579 26.9827C41.3331 27.396 41.3615 28.0953 41.3394 28.6776C41.3194 29.0346 41.2761 29.3815 41.2089 29.7197C40.8989 31.1642 40.2352 32.3863 39.1879 33.4329C38.7879 33.8364 38.3534 34.1848 37.8877 34.477C37.2038 34.889 36.4133 35.2129 35.6429 35.3963C35.3799 35.4555 35.1108 35.5015 34.836 35.5341C34.7903 35.5395 34.6676 35.5444 34.4796 35.549C32.3318 35.5997 22.2111 35.5997 20.1393 35.5489C19.9544 35.5443 19.8336 35.5394 19.7883 35.5341ZM17.9938 28.1439C17.9938 26.6441 19.2101 25.4282 20.7106 25.4282C22.2111 25.4282 23.4274 26.6441 23.4274 28.1439C23.4274 29.6438 22.2111 30.8596 20.7106 30.8596C19.2101 30.8596 17.9938 29.6438 17.9938 28.1439ZM31.199 28.1438C31.199 26.644 32.4154 25.4281 33.9158 25.4281C35.4163 25.4281 36.6327 26.644 36.6327 28.1438C36.6327 29.6436 35.4163 30.8595 33.9158 30.8595C32.4154 30.8595 31.199 29.6436 31.199 28.1438Z" fill="white" />
                        </svg>
                    </div>
                </div>}

            <div className={`chat-box-div ${showChat ? "show" : ""}`}>
                <div className="chat-box-header">
                    <p className={`${showChat ? "show" : ""}`}>Need Help? Chat with us</p>
                    <p className={`${showChat ? "show" : ""}`}>Click one of our representatives below</p>
                </div>
                <div className='chat-persons'>
                    <SupportPerson avatar='avatar2.png' number={+918714993111} name={"james"} title={"customer support"} />
                    <SupportPerson avatar='avatar3.png' number={+918714990111} name={"mia"} title={"sale support"} />
                    {/* <SupportPerson avatar='men.webp' number={+918714993111} name={"james"} title={"customer support"} />
                    <SupportPerson avatar='lady.webp' number={+918714990111} name={"mia"} title={"sale support"} /> */}
                </div>
            </div>
        </div>
    )
}

export default ChatIcon
